import csv
import time
import sys
import os.path
from selenium import webdriver
import re


driver = webdriver.Chrome(os.path.dirname(os.path.abspath('')) + '\chromedriver1.exe')

driver.get('https://www.bet365.com/?lng=1&rurl=casino.bet365.com#/IP/')
driver.get('https://www.bet365.com/?lng=1&rurl=casino.bet365.com#/IP/')

splittedCoef = [[]]
splittedLeagues = [[]]
iteration = 0
globalIndex = 0

time.sleep(5)
bar_item = driver.find_elements_by_xpath("//div[@class='ip-ControlBar_BBarItem ']")
for element in bar_item:
    if element.text == "Event View":
        element.click();
        break
time.sleep(5)
elements = driver.find_elements_by_xpath("//div[@class='ipn-ClassificationContainer ']")
my = driver.find_elements_by_xpath("//div[@class='ipn-Competition ']")

lastLeague = ""


#<div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Deportivo Paraguayo</div><div class="ipn-TeamStack_Team">Puerto Nuevo</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_Score">0-2</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">45:00</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div>

#<div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hasavicon ipn-Fixture-hastimer ipn-Fixture-selected "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team" style="">Burnley</div><div class="ipn-TeamStack_Team" style="">Newcastle</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_AVIcon ipg-AVIcon_Audio "></div><div class="ipn-ScoreDisplayStandard_Score">0-2</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">34:30</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div>

#<div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hasavicon ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Burnley</div><div class="ipn-TeamStack_Team">Newcastle</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_AVIcon ipg-AVIcon_Audio "></div><div class="ipn-ScoreDisplayStandard_Score">0-2</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">36:37</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div>

#<div class="ipn-ClassificationButton ipn-ClassificationButton_Classification-1 "><span class="ci-ClassificationIcon ci-ClassificationIcon-1 ipn-ClassificationButton_Icon "></span><span class="ipn-ClassificationButton_Label " style="">Soccer</span></div>

#<div class="ipn-Classification ipn-Classification-open "><div class="ipn-ClassificationButton ipn-ClassificationButton_Classification-1 "><span class="ci-ClassificationIcon ci-ClassificationIcon-1 ipn-ClassificationButton_Icon "></span><span class="ipn-ClassificationButton_Label " style="">Soccer</span></div><div class="ipn-ClassificationContainer "><div class="ipn-Competition "><div class="ipn-CompetitionButton ">England Premier League</div><div class="ipn-Competition_Icon "></div><div class="ipn-Competition_FavouriteButton "></div><div class="ipn-CompetitionContainer "><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hasavicon ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Burnley</div><div class="ipn-TeamStack_Team">Newcastle</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_AVIcon ipg-AVIcon_Audio "></div><div class="ipn-ScoreDisplayStandard_Score" style="">1-2</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">40:08</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div></div></div><div class="ipn-Competition "><div class="ipn-CompetitionButton ">Spain Primera Liga</div><div class="ipn-Competition_Icon "></div><div class="ipn-Competition_FavouriteButton "></div><div class="ipn-CompetitionContainer "><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hasavicon ipn-Fixture-hastimer ipn-Fixture-selected "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team" style="">Real Sociedad</div><div class="ipn-TeamStack_Team">Celta Vigo</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_AVIcon ipg-AVIcon_Video "></div><div class="ipn-ScoreDisplayStandard_Score" style="">2-0</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">52:44</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div></div></div><div class="ipn-Competition "><div class="ipn-CompetitionButton " style="">Italy Serie A</div><div class="ipn-Competition_Icon "></div><div class="ipn-Competition_FavouriteButton "></div><div class="ipn-CompetitionContainer " style=""><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hasavicon ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Cagliari</div><div class="ipn-TeamStack_Team" style="">Torino</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_AVIcon ipg-AVIcon_Video "></div><div class="ipn-ScoreDisplayStandard_Score">0-0</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">79:28</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div></div></div><div class="ipn-Competition "><div class="ipn-CompetitionButton " style="">Italy Serie B</div><div class="ipn-Competition_Icon "></div><div class="ipn-Competition_FavouriteButton "></div><div class="ipn-CompetitionContainer " style=""><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Crotone</div><div class="ipn-TeamStack_Team">Cosenza</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_Score">0-0</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">48:21</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div></div></div><div class="ipn-Competition "><div class="ipn-CompetitionButton ">Italy Serie C</div><div class="ipn-Competition_Icon "></div><div class="ipn-Competition_FavouriteButton "></div><div class="ipn-CompetitionContainer "><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Pordenone</div><div class="ipn-TeamStack_Team">Ternana</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_Score">1-0</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">63:46</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div></div></div><div class="ipn-Competition "><div class="ipn-CompetitionButton ">Germany Bundesliga II</div><div class="ipn-Competition_Icon "></div><div class="ipn-Competition_FavouriteButton "></div><div class="ipn-CompetitionContainer "><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hasavicon ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Hamburg</div><div class="ipn-TeamStack_Team">Union Berlin</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_AVIcon ipg-AVIcon_Video "></div><div class="ipn-ScoreDisplayStandard_Score">2-1</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">82:02</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div></div></div><div class="ipn-Competition "><div class="ipn-CompetitionButton " style="">France Ligue 2</div><div class="ipn-Competition_Icon "></div><div class="ipn-Competition_FavouriteButton "></div><div class="ipn-CompetitionContainer "><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hasavicon ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Metz</div><div class="ipn-TeamStack_Team">Ajaccio GFCA</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_AVIcon ipg-AVIcon_Video "></div><div class="ipn-ScoreDisplayStandard_Score">1-0</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">68:34</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div></div></div><div class="ipn-Competition "><div class="ipn-CompetitionButton ">Argentina Primera B Metropolitana</div><div class="ipn-Competition_Icon "></div><div class="ipn-Competition_FavouriteButton "></div><div class="ipn-CompetitionContainer "><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Fenix</div><div class="ipn-TeamStack_Team">UAI Urquiza</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_Score">0-0</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">54:18</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div></div></div><div class="ipn-Competition "><div class="ipn-CompetitionButton ">Argentina Primera D Metropolitana</div><div class="ipn-Competition_Icon "></div><div class="ipn-Competition_FavouriteButton "></div><div class="ipn-CompetitionContainer "><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Central Ballester</div><div class="ipn-TeamStack_Team">Yupanqui</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_Score">1-0</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">51:25</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Deportivo Muniz</div><div class="ipn-TeamStack_Team">Deportivo Liniers</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_Score" style="">0-2</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">53:34</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Deportivo Paraguayo</div><div class="ipn-TeamStack_Team">Puerto Nuevo</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_Score" style="">0-3</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">51:05</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div></div></div><div class="ipn-Competition "><div class="ipn-CompetitionButton ">Northern Ireland Amateur Cup</div><div class="ipn-Competition_Icon "></div><div class="ipn-Competition_FavouriteButton "></div><div class="ipn-CompetitionContainer "><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Crumlin Star</div><div class="ipn-TeamStack_Team">Sirocco Works</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_Score">0-1</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">65:23</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div></div></div><div class="ipn-Competition "><div class="ipn-CompetitionButton ">Republic of Ireland Leinster Senior League</div><div class="ipn-Competition_Icon "></div><div class="ipn-Competition_FavouriteButton "></div><div class="ipn-CompetitionContainer "><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Beggsboro AFC</div><div class="ipn-TeamStack_Team" style="">Lucan United</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_Score" style="">2-3</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">76:58</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div></div></div><div class="ipn-Competition "><div class="ipn-CompetitionButton " style="">England Non-League</div><div class="ipn-Competition_Icon "></div><div class="ipn-Competition_FavouriteButton "></div><div class="ipn-CompetitionContainer "><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Carshalton Ath</div><div class="ipn-TeamStack_Team">Dorking</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_Score">0-0</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">68:54</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Haringey Borough</div><div class="ipn-TeamStack_Team">Merstham</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_Score">2-0</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">66:20</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div></div></div><div class="ipn-Competition "><div class="ipn-CompetitionButton ">Scotland Reserve Cup</div><div class="ipn-Competition_Icon "></div><div class="ipn-Competition_FavouriteButton "></div><div class="ipn-CompetitionContainer "><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team" style="">Airdrieonians Reserves</div><div class="ipn-TeamStack_Team">Albion Reserves</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_Score" style="">5-2</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">84:29</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div><div class="ipn-Fixture ipn-Fixture_HasTeamStack ipn-Fixture-closed ipn-Fixture-hastimer "><div class="ipn-FixtureButton "><div class="ipn-FixtureButton_OpenIcon"></div><div class="ipn-TeamStack "><div class="ipn-TeamStack_Team">Stirling Reserves</div><div class="ipn-TeamStack_Team">Livingston Reserves</div></div><div class="ipn-ScoreDisplayStandard "><div class="ipn-ScoreDisplayStandard_Score" style="">0-3</div><div class="ipn-ScoreDisplayStandard_TimerWrapper "><div class="ipn-ScoreDisplayStandard_Timer">59:07</div></div></div></div><div class="ipn-Fixture_FavouriteButton "></div></div></div></div></div></div>

#
#/html/body/div[1]/div/div[2]/div[1]/div/div/div[2]/div[1]/div/div/div/div[3]/div[2]/div[1]
#/html/body/div[1]/div/div[2]/div[1]/div/div/div[2]/div[1]/div/div/div/div[3]/div[2]

#first
#/html/body/div[1]/div/div[2]/div[1]/div/div/div[2]/div[1]/div/div/div/div[3]/div[2]/div[1]
#/html/body/div[1]/div/div[2]/div[1]/div/div/div[2]/div[1]/div/div/div/div[3]/div[2]/div[15]
#

#print(elements[0].text)
s = elements[0].text.split("\n")
#print(s)
print(len(s))
# for elem in my:
#     print(elem.text)
print(len(my))
index = 1
while lastLeague == "":
    if len(s[len(s) - index]) > 4:
        if s[len(s) - index][2] == ':' or s[len(s) - index][3] == ':':
            if len(s[len(s) - (index + 4)]) > 6:
                lastLeague = s[len(s) - (index + 4)]
                print(lastLeague)
            else:
                index += 4
        else:
            index += 1
    else:
        index += 1




driver.quit()